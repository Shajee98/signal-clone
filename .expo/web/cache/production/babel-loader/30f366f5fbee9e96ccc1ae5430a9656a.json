{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useState}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import{ListItem,Avatar}from'react-native-elements';import{db}from\"../firbase\";var CustomListItem=function CustomListItem(_ref){var _chatMessages$,_chatMessages$2,_chatMessages$3;var id=_ref.id,chatName=_ref.chatName,enterChat=_ref.enterChat;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),chatMessages=_useState2[0],setchatMessages=_useState2[1];useEffect(function(){var unsubscribe=db.collection(\"chats\").doc(id).collection(\"messages\").orderBy(\"timestamp\",\"desc\").onSnapshot(function(snapshot){return setchatMessages(snapshot.docs.map(function(doc){return doc.data();}));});return unsubscribe;});return React.createElement(ListItem,{key:id,onPress:function onPress(){return enterChat(id,chatName);},key:id,bottomDivider:true},React.createElement(Avatar,{rounded:true,source:{uri:(chatMessages==null?void 0:(_chatMessages$=chatMessages[0])==null?void 0:_chatMessages$.photoURL)||\"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png\"}}),React.createElement(ListItem.Content,null,React.createElement(ListItem.Title,{style:{fontWeight:\"800\"}},chatName),React.createElement(ListItem.Subtitle,{numberOfLines:1,ellipsizeMode:\"tail\"},chatMessages==null?void 0:(_chatMessages$2=chatMessages[0])==null?void 0:_chatMessages$2.displayName,\": \",chatMessages==null?void 0:(_chatMessages$3=chatMessages[0])==null?void 0:_chatMessages$3.message)));};export default CustomListItem;var styles=StyleSheet.create({});","map":{"version":3,"sources":["/home/shajee/Desktop/signal-clone/components/CustomListItem.js"],"names":["React","useEffect","useState","ListItem","Avatar","db","CustomListItem","id","chatName","enterChat","chatMessages","setchatMessages","unsubscribe","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","uri","photoURL","fontWeight","displayName","message","styles","StyleSheet","create"],"mappings":"iEAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,C,2KAEA,OAASC,QAAT,CAAmBC,MAAnB,KAAiC,uBAAjC,CACA,OAASC,EAAT,kBAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAA+B,uDAA7BC,CAAAA,EAA6B,MAA7BA,EAA6B,CAAzBC,QAAyB,MAAzBA,QAAyB,CAAfC,SAAe,MAAfA,SAAe,CAClD,cAAwCP,QAAQ,CAAC,EAAD,CAAhD,wCAAOQ,YAAP,eAAqBC,eAArB,eAEAV,SAAS,CAAC,UAAM,CACZ,GAAMW,CAAAA,WAAW,CAAGP,EAAE,CAACQ,UAAH,CAAc,OAAd,EACCC,GADD,CACKP,EADL,EAECM,UAFD,CAEY,UAFZ,EAGCE,OAHD,CAGS,WAHT,CAGqB,MAHrB,EAICC,UAJD,CAIY,SAACC,QAAD,QAAcN,CAAAA,eAAe,CAACM,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QACxDA,CAAAA,GAAG,CAACM,IAAJ,EADwD,EAAlB,CAAD,CAA7B,EAJZ,CAApB,CAMc,MAAOR,CAAAA,WAAP,CACjB,CARQ,CAAT,CASA,MACI,qBAAC,QAAD,EAAU,GAAG,CAAEL,EAAf,CACU,OAAO,CAAE,yBAAME,CAAAA,SAAS,CAACF,EAAD,CAAIC,QAAJ,CAAf,EADnB,CAEU,GAAG,CAAED,EAFf,CAGU,aAAa,KAHvB,EAII,oBAAC,MAAD,EAAQ,OAAO,KAAf,CACQ,MAAM,CAAE,CAACc,GAAG,CAAE,CAAAX,YAAY,MAAZ,wBAAAA,YAAY,CAAG,CAAH,CAAZ,8BAAmBY,QAAnB,GAA+B,sEAArC,CADhB,EAJJ,CAOI,oBAAC,QAAD,CAAU,OAAV,MACI,oBAAC,QAAD,CAAU,KAAV,EAAgB,KAAK,CAAE,CAACC,UAAU,CAAE,KAAb,CAAvB,EAA6Cf,QAA7C,CADJ,CAEI,oBAAC,QAAD,CAAU,QAAV,EACA,aAAa,CAAE,CADf,CAEA,aAAa,CAAE,MAFf,EAGKE,YAHL,+BAGKA,YAAY,CAAG,CAAH,CAHjB,eAGK,gBAAmBc,WAHxB,MAGuCd,YAHvC,+BAGuCA,YAAY,CAAG,CAAH,CAHnD,eAGuC,gBAAmBe,OAH1D,CAFJ,CAPJ,CADJ,CAkBH,CA9BD,CAgCA,cAAenB,CAAAA,cAAf,CAEA,GAAMoB,CAAAA,MAAM,CAAGC,UAAU,CAACC,MAAX,CAAkB,EAAlB,CAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { StyleSheet, Text, View } from 'react-native'\nimport { ListItem, Avatar } from 'react-native-elements'\nimport { db } from '../firbase';\n\nconst CustomListItem = ({id, chatName, enterChat}) => {\n    const [chatMessages, setchatMessages] = useState([]);\n\n    useEffect(() => {\n        const unsubscribe = db.collection(\"chats\")\n                            .doc(id)\n                            .collection(\"messages\")\n                            .orderBy(\"timestamp\",\"desc\")\n                            .onSnapshot((snapshot) => setchatMessages(snapshot.docs.map((doc) => \n                                doc.data())));\n                      return unsubscribe;\n    });\n    return (\n        <ListItem key={id}\n                  onPress={() => enterChat(id,chatName)} \n                  key={id} \n                  bottomDivider>\n            <Avatar rounded \n                    source={{uri: chatMessages?.[0]?.photoURL || \"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png\",}} \n                    />\n            <ListItem.Content>\n                <ListItem.Title style={{fontWeight: \"800\"}}>{chatName}</ListItem.Title>\n                <ListItem.Subtitle \n                numberOfLines={1} \n                ellipsizeMode= \"tail\">\n                    {chatMessages?.[0]?.displayName}: {chatMessages?.[0]?.message}\n                    </ListItem.Subtitle>\n            </ListItem.Content>\n        </ListItem>\n    );\n};\n\nexport default CustomListItem\n\nconst styles = StyleSheet.create({})\n"]},"metadata":{},"sourceType":"module"}