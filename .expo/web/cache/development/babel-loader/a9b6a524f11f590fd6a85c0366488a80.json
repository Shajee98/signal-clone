{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/shajee/Desktop/signal-clone/Screens/ChatScreen.js\";\n\nimport React, { useLayoutEffect, useState } from 'react';\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Avatar } from 'react-native-elements';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport { AntDesign, FontAwesome, Ionicons } from '@expo/vector-icons';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { StatusBar } from 'expo-status-bar';\nimport { ScrollView } from 'react-native-gesture-handler';\nimport firbase from 'firebase';\nimport { auth, db, firebase } from \"../firbase\";\n\nvar ChatScreen = function ChatScreen(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      input = _useState2[0],\n      setInput = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      messages = _useState4[0],\n      setMessages = _useState4[1];\n\n  useLayoutEffect(function () {\n    navigation.setOptions({\n      title: 'Chat',\n      headerBackTitle: false,\n      headerTitleAlign: 'left',\n      headerTitle: function headerTitle() {\n        return React.createElement(View, {\n          style: {\n            flexDirection: \"row\",\n            alignItems: 'center'\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 17\n          }\n        }, React.createElement(Avatar, {\n          rounded: true,\n          source: {\n            uri: \"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png\"\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 23,\n            columnNumber: 21\n          }\n        }), React.createElement(Text, {\n          style: {\n            color: \"white\",\n            marginLeft: 10,\n            fontWeight: \"700\"\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 21\n          }\n        }, route.params.chatName));\n      },\n      headerLeft: function headerLeft() {\n        return React.createElement(TouchableOpacity, {\n          onPress: navigation.goBack,\n          style: {\n            marginLeft: 10\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 15\n          }\n        }, React.createElement(AntDesign, {\n          name: \"arrowleft\",\n          size: 24,\n          color: \"white\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 17\n          }\n        }));\n      },\n      headerRight: function headerRight() {\n        return React.createElement(View, {\n          style: {\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            width: 80,\n            marginRight: 20\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 17\n          }\n        }, React.createElement(TouchableOpacity, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 17\n          }\n        }, React.createElement(FontAwesome, {\n          name: \"video-camera\",\n          size: 24,\n          color: \"white\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 21\n          }\n        })), React.createElement(TouchableOpacity, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 17\n          }\n        }, React.createElement(Ionicons, {\n          name: \"call\",\n          size: 24,\n          color: \"white\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 21\n          }\n        })));\n      }\n    });\n  }, [navigation]);\n\n  var sendMessage = function sendMessage() {\n    Keyboard.dismiss();\n    db.collection('chats').doc(route.params.id).collection('messages').add({\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n      message: input,\n      displayName: auth.currentUser.displayName,\n      email: auth.currentUser.email,\n      photoURL: auth.currentUser.photoURL\n    });\n    setInput(\"\");\n  };\n\n  useLayoutEffect(function () {\n    var unsubscribe = db.collection(\"chats\").doc(route.params.id).collection(\"messages\").orderBy(\"timestamp\", \"desc\").onSnapshot(function (snapshot) {\n      return setMessages(snapshot.docs.map(function (doc) {\n        return {\n          id: doc.id,\n          data: doc.data()\n        };\n      }));\n    });\n    return unsubscribe;\n  }, [route]);\n  return React.createElement(SafeAreaView, {\n    style: {\n      flex: 1,\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, React.createElement(StatusBar, {\n    style: \"light\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }), React.createElement(KeyboardAvoidingView, {\n    behavior: Platform.OS === \"android\" ? \"padding\" : \"height\",\n    keyboardVerticalOffset: -500,\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, React.createElement(TouchableWithoutFeedback, {\n    onPress: Keyboard.dismiss,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 19\n    }\n  }, React.createElement(React.Fragment, null, React.createElement(ScrollView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, messages.map(function (_ref2) {\n    var id = _ref2.id,\n        data = _ref2.data;\n    return data.email === auth.currentUser.email ? React.createElement(View, {\n      key: id,\n      style: styles.reciever,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 30\n      }\n    }, React.createElement(Avatar, {\n      rounded: true,\n      size: 30,\n      bottom: -15,\n      right: -5,\n      position: \"absolute\",\n      containerStyle: {\n        position: \"absolute\",\n        bottom: -15,\n        right: -5\n      },\n      source: {\n        uri: data.photoURL\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 34\n      }\n    }), React.createElement(Text, {\n      style: styles.recieverText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 34\n      }\n    }, data.message)) : React.createElement(View, {\n      key: id,\n      style: styles.sender,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 30\n      }\n    }, React.createElement(Avatar, {\n      rounded: true,\n      size: 30,\n      bottom: -15,\n      right: -5,\n      position: \"absolute\",\n      containerStyle: {\n        position: \"absolute\",\n        bottom: -15,\n        right: -5\n      },\n      source: {\n        uri: data.photoURL\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 34\n      }\n    }), React.createElement(Text, {\n      style: styles.senderText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 34\n      }\n    }, data.message), React.createElement(Text, {\n      style: styles.senderName,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 34\n      }\n    }, data.displayName));\n  })), React.createElement(View, {\n    style: styles.footer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, React.createElement(TextInput, {\n    placeholder: \"Enter Message\",\n    value: input,\n    style: styles.textInput,\n    onChangeText: function onChangeText(text) {\n      return setInput(text);\n    },\n    onSubmitEditing: sendMessage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }), React.createElement(TouchableOpacity, {\n    activeOpacity: 0.5,\n    onPress: sendMessage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, React.createElement(Ionicons, {\n    name: \"send\",\n    size: 24,\n    color: \"#2B68E6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 32\n    }\n  })))))));\n};\n\nexport default ChatScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingBottom: -20\n  },\n  reciever: {\n    padding: 15,\n    backgroundColor: \"#ECECEC\",\n    alignSelf: \"flex-end\",\n    borderRadius: 20,\n    marginRight: 15,\n    marginBottom: 20,\n    maxWidth: \"80%\",\n    position: \"relative\"\n  },\n  sender: {\n    padding: 15,\n    backgroundColor: \"#0000FF\",\n    alignSelf: \"flex-start\",\n    borderRadius: 20,\n    margin: 15,\n    maxWidth: \"80%\",\n    position: \"relative\"\n  },\n  senderText: {\n    color: \"white\",\n    fontWeight: \"500\",\n    marginLeft: 10,\n    marginBottom: 15\n  },\n  recieverText: {\n    color: \"black\",\n    marginLeft: 10,\n    fontWeight: \"500\"\n  },\n  senderName: {\n    left: 10,\n    paddingRight: 10,\n    fontSize: 10,\n    color: \"white\"\n  },\n  footer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    width: \"100%\",\n    padding: 10\n  },\n  textInput: {\n    bottom: 0,\n    height: 40,\n    flex: 1,\n    marginRight: 15,\n    backgroundColor: \"#ECECEC\",\n    padding: 10,\n    color: \"grey\",\n    borderRadius: 30\n  }\n});","map":{"version":3,"sources":["/home/shajee/Desktop/signal-clone/Screens/ChatScreen.js"],"names":["React","useLayoutEffect","useState","Avatar","AntDesign","FontAwesome","Ionicons","SafeAreaView","StatusBar","ScrollView","firbase","auth","db","firebase","ChatScreen","navigation","route","input","setInput","messages","setMessages","setOptions","title","headerBackTitle","headerTitleAlign","headerTitle","flexDirection","alignItems","uri","color","marginLeft","fontWeight","params","chatName","headerLeft","goBack","headerRight","justifyContent","width","marginRight","sendMessage","Keyboard","dismiss","collection","doc","id","add","timestamp","firestore","FieldValue","serverTimestamp","message","displayName","currentUser","email","photoURL","unsubscribe","orderBy","onSnapshot","snapshot","docs","map","data","flex","backgroundColor","Platform","OS","styles","container","reciever","position","bottom","right","recieverText","sender","senderText","senderName","footer","textInput","text","StyleSheet","create","paddingBottom","padding","alignSelf","borderRadius","marginBottom","maxWidth","margin","left","paddingRight","fontSize","height"],"mappings":"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","sourcesContent":["import React, { useLayoutEffect, useState } from 'react'\nimport { Keyboard, KeyboardAvoidingView, Platform, StyleSheet, Text, TextInput, View } from 'react-native'\nimport { Avatar } from 'react-native-elements'\nimport { TouchableOpacity, TouchableWithoutFeedback } from 'react-native';\nimport {AntDesign, FontAwesome, Ionicons} from '@expo/vector-icons'\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { StatusBar } from 'expo-status-bar';\nimport { ScrollView } from 'react-native-gesture-handler';\nimport firbase from 'firebase';\nimport {auth, db, firebase} from '../firbase';\n\nconst ChatScreen = ({navigation , route}) => {\n    const [input, setInput] = useState('');\n    const [messages, setMessages] = useState([]);\n\n    useLayoutEffect(() => {\n        navigation.setOptions({\n            title: 'Chat',\n            headerBackTitle: false,\n            headerTitleAlign: 'left',\n            headerTitle: () => (\n                <View style={{flexDirection:\"row\", alignItems: 'center'}}>\n                    <Avatar rounded source={{uri: \"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png\",}} />\n                    <Text\n                    style={{color: \"white\", marginLeft: 10, fontWeight: \"700\"}}\n                    >{route.params.chatName}</Text>\n                </View>\n            ),\n            headerLeft: () => (\n              <TouchableOpacity \n              onPress={navigation.goBack}\n              style={{marginLeft: 10}}>\n                <AntDesign name=\"arrowleft\" size={24} color=\"white\"/>\n              </TouchableOpacity>\n            ),\n            headerRight: () => (\n                <View\n                style={{flexDirection:\"row\",\n                        justifyContent: \"space-between\", \n                        width: 80, \n                        marginRight: 20}}>\n                <TouchableOpacity>\n                    <FontAwesome name=\"video-camera\" size={24} color=\"white\"/>\n                </TouchableOpacity>\n                <TouchableOpacity>\n                    <Ionicons name=\"call\" size={24} color=\"white\"/>\n                </TouchableOpacity>\n                </View>\n            )\n        });\n    },[navigation]);\n\n    const sendMessage = () => {\n        Keyboard.dismiss();\n        db.collection('chats').doc(route.params.id).collection('messages').add({\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n            message: input,\n            displayName: auth.currentUser.displayName,\n            email: auth.currentUser.email,\n            photoURL: auth.currentUser.photoURL\n        });\n        setInput(\"\");\n    \n    };\n    \n    useLayoutEffect(() => {\n      const unsubscribe = db.collection(\"chats\")\n                          .doc(route.params.id)\n                          .collection(\"messages\")\n                          .orderBy(\"timestamp\", \"desc\")\n                          .onSnapshot((snapshot) => setMessages(\n                              snapshot.docs.map((doc) => ({\n                                 id: doc.id,\n                                 data: doc.data()\n                              }))\n                          ));\n                          return unsubscribe;\n    },[route])\n\n    return (\n        <SafeAreaView style={{flex: 1, backgroundColor: \"white\"}}>\n            <StatusBar style=\"light\" />\n            <KeyboardAvoidingView\n              behavior={Platform.OS === \"android\" ? \"padding\":\"height\"}\n              keyboardVerticalOffset={-500}\n              style={styles.container}>\n                  <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\n                  <>\n                <ScrollView>\n                     {messages.map(({id,data}) => \n                         data.email === auth.currentUser.email ? (\n                             <View key={id} style={styles.reciever}>\n                                 <Avatar rounded \n                                         size={30} \n                                         bottom={-15} \n                                         right={-5} \n                                         position=\"absolute\"\n                                         containerStyle={{\n                                             position: \"absolute\",\n                                             bottom: -15,\n                                             right: -5\n                                         }}\n                                         source={{uri: data.photoURL}}/>\n                                 <Text style={styles.recieverText}>{data.message}</Text>\n                             </View>\n                         ): \n                         (\n                             <View key={id} style={styles.sender}>\n                                 <Avatar \n                                 rounded \n                                 size={30} \n                                 bottom={-15} \n                                 right={-5} \n                                 position=\"absolute\"\n                                 containerStyle={{\n                                     position: \"absolute\",\n                                     bottom: -15,\n                                     right: -5\n                                 }}\n                                 source={{uri: data.photoURL}}/>\n                                 <Text style={styles.senderText}>{data.message}</Text>\n                                 <Text style={styles.senderName}>{data.displayName}</Text>\n                             </View>\n                         )\n                     )}\n                </ScrollView>\n                <View style={styles.footer}>\n                    <TextInput placeholder=\"Enter Message\" \n                               value={input}  \n                               style={styles.textInput} \n                               onChangeText={(text) => setInput(text)}\n                               onSubmitEditing={sendMessage}/>\n                    <TouchableOpacity activeOpacity={0.5} onPress={sendMessage}>\n                               <Ionicons name=\"send\" size={24} color=\"#2B68E6\"/>\n                    </TouchableOpacity>           \n                </View>\n                </>\n                </TouchableWithoutFeedback>\n              </KeyboardAvoidingView>\n        </SafeAreaView>\n    )\n}\n\nexport default ChatScreen\n\nconst styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      paddingBottom: -20\n    },\n    reciever: {\n      padding: 15,\n      backgroundColor: \"#ECECEC\",\n      alignSelf: \"flex-end\",\n      borderRadius: 20,\n      marginRight: 15,\n      marginBottom: 20,\n      maxWidth: \"80%\",\n      position: \"relative\"\n    },\n    sender: {\n      padding: 15,\n      backgroundColor: \"#0000FF\",\n      alignSelf: \"flex-start\",\n      borderRadius: 20,\n      margin: 15,\n      maxWidth: \"80%\",\n      position: \"relative\"\n    },\n    senderText: {\n      color: \"white\",\n      fontWeight: \"500\",\n      marginLeft: 10,\n      marginBottom: 15\n    },\n    recieverText: {\n      color: \"black\",\n      marginLeft: 10,\n      fontWeight: \"500\"\n    },  \n    senderName: {\n        left: 10,\n        paddingRight: 10,\n        fontSize: 10,\n        color: \"white\"\n    },\n    footer: {\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      width: \"100%\",\n      padding: 10\n        },\n    textInput: {\n      bottom: 0,\n      height: 40,\n      flex: 1,\n      marginRight: 15,\n      backgroundColor: \"#ECECEC\",\n      padding: 10,\n      color: \"grey\",\n      borderRadius: 30\n    }\n})\n"]},"metadata":{},"sourceType":"module"}