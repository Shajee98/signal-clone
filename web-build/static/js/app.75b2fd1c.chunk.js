(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{236:function(e,t,a){"use strict";a.d(t,"a",(function(){return X}));var n,r=a(139),o=a(0),i=a.n(o),c=a(1),l=a(175),s=a(338),u=a(15),d=a.n(u),m=a(86),h=a(3),g=a(83),f=a(29),p=a(138),E=(a(311),a(324),(n=p.a.initializeApp({apiKey:"AIzaSyDbb9P554-t1eiBC3ADIviSXL_UUFF1EsY",authDomain:"signal-clone-8a075.firebaseapp.com",projectId:"signal-clone-8a075",storageBucket:"signal-clone-8a075.appspot.com",messagingSenderId:"47279117775",appId:"1:47279117775:web:95f0e6338241c0b6bdaeba"})).firestore()),b=n.auth(),y=function(e){var t=e.navigation,a=Object(o.useState)(""),n=d()(a,2),r=n[0],c=n[1],l=Object(o.useState)(""),s=d()(l,2),u=s[0],E=s[1];Object(o.useEffect)((function(){return p.a.auth().onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);var b=function(){p.a.auth().signInWithEmailAndPassword(r,u).catch((function(e){return alert(e)}))};return i.a.createElement(g.a,{behavior:"padding",style:v.container},i.a.createElement(m.a,{style:"light"}),i.a.createElement(f.c,{source:{uri:"https://blog.mozilla.org/internetcitizen/files/2018/08/signal-logo.png"},style:{width:200,height:200,position:"relative"}}),i.a.createElement(h.a,{style:v.inputContainer},i.a.createElement(f.d,{placeholder:"Email",autoFocus:!0,type:"email",value:r,onChangeText:function(e){return c(e)}}),i.a.createElement(f.d,{placeholder:"Password",secureTextEntry:!0,type:"password",value:u,onChangeText:function(e){return E(e)},onSubmitEditing:b})),i.a.createElement(f.b,{raised:!0,title:"Login",onPress:b,containerStyle:v.button}),i.a.createElement(f.b,{raised:!0,title:"Register",onPress:function(){return t.navigate("Register")},type:"outline",containerStyle:v.button}))},v=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300,marginTop:-150},button:{width:200,marginTop:10}}),C=function(e){var t=e.navigation,a=Object(o.useState)(""),n=d()(a,2),r=n[0],c=n[1],l=Object(o.useState)(""),s=d()(l,2),u=s[0],E=s[1],b=Object(o.useState)(""),y=d()(b,2),v=y[0],C=y[1],w=Object(o.useState)(""),O=d()(w,2),x=O[0],k=O[1];Object(o.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Back to Login"})}),[t]);var T=function(){p.a.auth().createUserWithEmailAndPassword(u,v).then((function(e){e.user.updateProfile({displayName:r,photoURL:x||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"})})).catch((function(e){return alert(e.message)}))};return i.a.createElement(g.a,{behavior:"padding",style:S.container},i.a.createElement(m.a,{style:"light"}),i.a.createElement(f.f,{h3:!0,style:{marginBottom:50}},"Create a Signal Account"),i.a.createElement(h.a,{style:S.inputContainer},i.a.createElement(f.d,{placeholder:"Full Name",autoFocus:!0,type:"text",value:r,onChangeText:function(e){return c(e)}}),i.a.createElement(f.d,{placeholder:"Email",type:"email",value:u,onChangeText:function(e){return E(e)}}),i.a.createElement(f.d,{placeholder:"Password",secureTextEntry:!0,type:"password",value:v,onChangeText:function(e){return C(e)}}),i.a.createElement(f.d,{placeholder:"Profile Picture URL (Optional)",type:"text",value:x,onChangeText:function(e){return k(e)},onSubmitEditing:T})),i.a.createElement(f.b,{raised:!0,containerStyle:S.button,title:"Register",onPress:T}))},S=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},button:{width:200,marginTop:10},inputContainer:{width:300}}),w=a(57),O=a(118),x=a(23),k=function(e){var t,a,n,r=e.id,c=e.chatName,l=e.enterChat,s=Object(o.useState)([]),u=d()(s,2),m=u[0],h=u[1];return Object(o.useEffect)((function(){return E.collection("chats").doc(r).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return h(e.docs.map((function(e){return e.data()})))}))})),i.a.createElement(f.e,{key:r,onPress:function(){return l(r,c)},key:r,bottomDivider:!0},i.a.createElement(f.a,{rounded:!0,source:{uri:(null==m||null==(t=m[0])?void 0:t.photoURL)||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"}}),i.a.createElement(f.e.Content,null,i.a.createElement(f.e.Title,{style:{fontWeight:"800"}},c),i.a.createElement(f.e.Subtitle,{numberOfLines:1,ellipsizeMode:"tail"},null==m||null==(a=m[0])?void 0:a.displayName,": ",null==m||null==(n=m[0])?void 0:n.message)))},T=(c.a.create({}),a(227)),L=a(222),j=function(e){var t=e.navigation,a=Object(o.useState)([]),n=d()(a,2),r=n[0],c=n[1],l=function(){p.a.auth().signOut().then((function(){t.replace("Login")}))};Object(o.useEffect)((function(){return E.collection("chats").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(o.useLayoutEffect)((function(){t.setOptions({title:"Signal",headerStyle:{backgroundColor:"#fff"},headerTitleStyle:{color:"black"},headerTintColor:"black",headerLeft:function(){var e;return i.a.createElement(h.a,{style:{marginLeft:20}},i.a.createElement(x.a,{onPress:l,activeOpacity:.5},i.a.createElement(f.a,{rounded:!0,source:{uri:null==(e=p.a.auth().currentUser)?void 0:e.photoURL}})))},headerRight:function(){return i.a.createElement(h.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},i.a.createElement(x.a,{activeOpacity:.5},i.a.createElement(T.a,{name:"camerao",size:24,color:"black"})),i.a.createElement(x.a,{activeOpacity:.5,onPress:function(){t.navigate("AddChat")}},i.a.createElement(L.a,{name:"pencil",size:24,color:"black"})))}})}),[t]);var s=function(e,a){t.navigate("Chat",{id:e,chatName:a})};return i.a.createElement(O.a,null,i.a.createElement(w.a,{style:R.container},r.map((function(e){var t=e.id,a=e.data.ChatName;return i.a.createElement(k,{key:t,id:t,chatName:a,enterChat:s})}))))},R=c.a.create({container:{height:"100%"}}),P=a(137),U=function(e){var t=e.navigation,a=Object(o.useState)(""),n=d()(a,2),r=n[0],c=n[1];Object(o.useLayoutEffect)((function(){t.setOptions({title:"Add a new chat",headerBackTitle:"Chats"})}),[t]);var l=function(){E.collection("chats").add({ChatName:r}).then((function(){t.goBack()})).catch((function(e){return alert(e)}))};return i.a.createElement(h.a,{style:z.container},i.a.createElement(f.d,{placeholder:"Enter a chat name",value:r,onChangeText:function(e){return c(e)},onSubmitEditing:l,leftIcon:i.a.createElement(P.default,{name:"wechat",type:"antdesign",size:24,color:"grey"})}),i.a.createElement(f.b,{disabled:!r,title:"Create new Chat",onPress:l}))},z=c.a.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),B=a(62),N=a(7),I=a(25),A=a(53),F=a(68),D=a(217),W=a(208),H=a(337),J=function(e){var t=e.navigation,a=e.route,n=Object(o.useState)(""),c=d()(n,2),l=c[0],s=c[1],u=Object(o.useState)([]),y=d()(u,2),v=y[0],C=y[1];Object(o.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitle:!1,headerTitleAlign:"left",headerTitle:function(){var e;return i.a.createElement(h.a,{style:{flexDirection:"row",alignItems:"center"}},i.a.createElement(f.a,{rounded:!0,source:{uri:null==(e=v[0])?void 0:e.data.photoURL}}),i.a.createElement(I.a,{style:{color:"white",marginLeft:10,fontWeight:"700"}},a.params.chatName))},headerLeft:function(){return i.a.createElement(x.a,{onPress:t.goBack,style:{marginLeft:10}},i.a.createElement(T.a,{name:"arrowleft",size:24,color:"white"}))},headerRight:function(){return i.a.createElement(h.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},i.a.createElement(x.a,null,i.a.createElement(D.a,{name:"video-camera",size:24,color:"white"})),i.a.createElement(x.a,null,i.a.createElement(W.a,{name:"call",size:24,color:"white"})))}})}),[t,v]);var S=function(){B.a.dismiss(),E.collection("chats").doc(a.params.id).collection("messages").add({timestamp:p.a.firestore.FieldValue.serverTimestamp(),message:l,displayName:b.currentUser.displayName,email:b.currentUser.email,photoURL:b.currentUser.photoURL}),s("")};return Object(o.useLayoutEffect)((function(){return E.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return C(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[a]),i.a.createElement(H.a,{style:{flex:1,backgroundColor:"white"}},i.a.createElement(m.a,{style:"light"}),i.a.createElement(g.a,{behavior:"android"===N.a.OS?"padding":"height",keyboardVerticalOffset:-500,style:M.container},i.a.createElement(F.a,{onPress:B.a.dismiss},i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,null,v.map((function(e){var t=e.id,a=e.data;return a.email===b.currentUser.email?i.a.createElement(h.a,{key:t,style:M.reciever},i.a.createElement(f.a,{rounded:!0,size:30,bottom:-15,right:-5,position:"absolute",containerStyle:{position:"absolute",bottom:-15,right:-5},source:{uri:a.photoURL}}),i.a.createElement(I.a,{style:M.recieverText},a.message)):i.a.createElement(h.a,{key:t,style:M.sender},i.a.createElement(f.a,{rounded:!0,size:30,bottom:-15,right:-5,position:"absolute",containerStyle:{position:"absolute",bottom:-15,right:-5},source:{uri:a.photoURL}}),i.a.createElement(I.a,{style:M.senderText},a.message),i.a.createElement(I.a,{style:M.senderName},a.displayName))}))),i.a.createElement(h.a,{style:M.footer},i.a.createElement(A.a,{placeholder:"Enter Message",value:l,style:M.textInput,onChangeText:function(e){return s(e)},onSubmitEditing:S}),i.a.createElement(x.a,{disabled:!l,activeOpacity:.5,onPress:S},i.a.createElement(W.a,{name:"send",size:24,color:"#2B68E6"})))))))},M=c.a.create({container:{flex:1,paddingBottom:-20},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"#0000FF",alignSelf:"flex-start",borderRadius:20,margin:15,maxWidth:"80%",position:"relative"},senderText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15},recieverText:{color:"black",marginLeft:10,fontWeight:"500"},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:10},textInput:{bottom:0,height:40,flex:1,marginRight:15,backgroundColor:"#ECECEC",padding:10,color:"grey",borderRadius:30}}),V=Object(s.a)(),K={headerStyle:{backgroundColor:"blue"},headerTitleStyle:{color:"white",alignSelf:"center"},headerTintColor:"white",headerTitleAlign:"center"};function X(){return i.a.createElement(l.a,null,i.a.createElement(V.Navigator,{screenOptions:K},i.a.createElement(V.Screen,{name:"Login",component:y}),i.a.createElement(V.Screen,{name:"Register",component:C}),i.a.createElement(V.Screen,{name:"Home",component:j}),i.a.createElement(V.Screen,{name:"AddChat",component:U}),i.a.createElement(V.Screen,{name:"Chat",component:J})))}c.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},248:function(e,t,a){e.exports=a(322)}},[[248,1,2]]]);
//# sourceMappingURL=app.75b2fd1c.chunk.js.map